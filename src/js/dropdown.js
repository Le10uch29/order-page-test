(()=>{const dropdown=document.querySelector(".order__dropdown");if(!dropdown)return;const selected=dropdown.querySelector(".order__dropdown-selected");const selectedText=dropdown.querySelector(".order__dropdown-text");const list=dropdown.querySelector(".order__dropdown-list");const items=dropdown.querySelectorAll(".order__dropdown-item");const hiddenInput=dropdown.querySelector(".order__dropdown-value");selected.addEventListener("click",(e)=>{e.stopPropagation();dropdown.classList.toggle("active")});items.forEach((item)=>{item.addEventListener("click",(e)=>{e.stopPropagation();items.forEach((i)=>i.classList.remove("selected"));item.classList.add("selected");if(selectedText)selectedText.textContent=item.textContent;if(hiddenInput)hiddenInput.value=item.dataset.value||item.textContent;dropdown.classList.remove("active")})});document.addEventListener("click",(e)=>{if(!dropdown.contains(e.target))dropdown.classList.remove("active");});list.addEventListener("click",(e)=>e.stopPropagation());dropdown.setAttribute("tabindex","0");dropdown.addEventListener("keydown",(e)=>{const isOpen=dropdown.classList.contains("active");if(e.key==="Enter"||e.key===" "){e.preventDefault();dropdown.classList.toggle("active");return}
if(e.key==="Escape"){dropdown.classList.remove("active");return}
if(isOpen&&(e.key==="ArrowDown"||e.key==="ArrowUp")){e.preventDefault();const current=dropdown.querySelector(".order__dropdown-item.selected");const arr=Array.from(items);const index=arr.indexOf(current);let next=e.key==="ArrowDown"?index+1:index-1;if(next<0)next=arr.length-1;if(next>=arr.length)next=0;arr[next].click();arr[next].scrollIntoView({block:"nearest"})}})})()